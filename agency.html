<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Visulization Page for now</title>
        <link rel="stylesheet" href="styles-vis.css">
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;400;700&display=swap" rel="stylesheet">
        <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    </head>
    <body>
        <div class="header">
            <div class="h1-img">
                <img src="images/icon.png">
                <h1>Prince George's County Spending</h1>
            </div>
            <div class="topnav">
                <a href="index.html">Home</a>
                <div class="dropdown">
                    <a class="active" href="#Spending">Spending</a>
                    <div class="dropdown-content">
                        <a href="agency.html">Agency</a>
                        <a href="payment.html">Payment</a>
                    </div>
                </div>
                <a href="about.html">About</a>
            </div>
        </div>
        <div class ="container">
            <div class="wrapper">
                <h2>Spending by Agency</h2>
                <div class="chartWrapper">
                    <div id="chartContainer" style="height: 500px; width: 100%;">
                        <img src="https://i.imgur.com/fXUIBfi.gif" alt="Chart will Render Here..."/>
                    </div>
                </div>
                <div class="about">
                    <p>From the visual, we can see that spending from Education superceeds the spending from all other agencies. However, there is also a good amount of spending from the Public Works & Transportation agency and the Environmental agency. You can mouse over specific agencies to view their exact spending amount.</p>
                </div>
            </div>
        </div>
        <script>
            fetch('/agency')
            .then((data) => data.json())
            .then((data) => {
                console.log(data['data'])
	
                var chart = new CanvasJS.Chart("chartContainer", {
                    animationEnabled: true,
                    /*title: {
                        text: "Spending by Agency",
                        fontSize: 25
                    },*/
                    axisX: {
                        labelFontSize: 12,
                        interval: 1
                    },
                    axisY: {
                        labelFontSize: 12,
                        title: "Amount ($)",
                        titleFontSize: 18,
                        scaleBreaks: {
                            autoCalculate: true,
                            type: "wavy"
                        }
                    },
                    data: [{
                        type: "bar",
                        dataPoints: data['data']
                    }]
                });
                chart.render();
                
            })
        </script>
    </body>
</html>